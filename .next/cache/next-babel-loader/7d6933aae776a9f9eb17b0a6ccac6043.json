{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"C:\\\\test\\\\component\\\\home\\\\main\\\\postlist\\\\list\\\\features.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport CommentList from './features-comment';\nimport Router from 'next/router';\n\nfunction Features(_ref) {\n  var id = _ref.id,\n      comment = _ref.comment,\n      message = _ref.message;\n  var formRef = React.createRef();\n  var buAllRef;\n  useEffect(function () {\n    //判断帖子中是否收藏 点赞过\n    console.log(message);\n\n    if (message) {\n      var result = message.like.findIndex(function (e) {\n        return e.postId == id;\n      });\n\n      if (result != -1) {\n        buAllRef.children[0].children[0].classList.add('icon-dianzan1');\n      }\n\n      var result2 = message.save.findIndex(function (e) {\n        return e.postId == id;\n      });\n\n      if (result2 != -1) {\n        buAllRef.children[1].children[0].classList.add('icon-shoucang1');\n      }\n    }\n  }, []);\n\n  var commentEv = function commentEv() {\n    //打开评论界面按钮事件\n    var form = formRef.current;\n\n    if (getComputedStyle(form).display == 'none') {\n      form.style.display = 'flex';\n      if (!form.hidden) form.children[0].focus();\n    } else {\n      form.style.display = 'none';\n    }\n  };\n\n  var saveEv = function saveEv(e) {\n    var target, request, res, _request, _res;\n\n    return _regeneratorRuntime.async(function saveEv$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            target = e.target.closest('.save').children[0]; //定义save按钮元素\n\n            target.classList.toggle('icon-shoucang1');\n\n            if (!target.classList.contains('icon-shoucang1')) {\n              _context.next = 14;\n              break;\n            }\n\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(fetch(\"http://localhost:3001/post/save/\".concat(id), {\n              method: 'POST',\n              credentials: \"include\"\n            }));\n\n          case 5:\n            request = _context.sent;\n            if (request.status == 404) Router.push('/');\n            if (request.status == 303) target.classList.remove('icon-shoucang1');\n            _context.next = 10;\n            return _regeneratorRuntime.awrap(request.json());\n\n          case 10:\n            res = _context.sent;\n            alert(res);\n            _context.next = 22;\n            break;\n\n          case 14:\n            _context.next = 16;\n            return _regeneratorRuntime.awrap(fetch(\"http://localhost:3001/post/save/remove/\".concat(id), {\n              method: 'POST',\n              credentials: \"include\"\n            }));\n\n          case 16:\n            _request = _context.sent;\n            if (_request.status == 404) Router.push('/');\n            _context.next = 20;\n            return _regeneratorRuntime.awrap(_request.json());\n\n          case 20:\n            _res = _context.sent;\n            alert(_res);\n\n          case 22:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var likeEv = function likeEv(e) {\n    var target, request, res, _request2, _res2;\n\n    return _regeneratorRuntime.async(function likeEv$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            target = e.target.closest('.like').children[0]; //定义like按钮元素\n\n            target.classList.toggle('icon-dianzan1');\n\n            if (!target.classList.contains('icon-dianzan1')) {\n              _context2.next = 14;\n              break;\n            }\n\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(fetch(\"http://localhost:3001/post/like/\".concat(id), {\n              method: 'POST',\n              credentials: \"include\"\n            }));\n\n          case 5:\n            request = _context2.sent;\n            if (request.status == 404) Router.push('/');\n            if (request.status == 303) target.classList.remove('icon-dianzan1');\n            _context2.next = 10;\n            return _regeneratorRuntime.awrap(request.json());\n\n          case 10:\n            res = _context2.sent;\n            alert(res);\n            _context2.next = 22;\n            break;\n\n          case 14:\n            _context2.next = 16;\n            return _regeneratorRuntime.awrap(fetch(\"http://localhost:3001/post/like/remove/\".concat(id), {\n              method: 'POST',\n              credentials: \"include\"\n            }));\n\n          case 16:\n            _request2 = _context2.sent;\n            if (_request2.status == 404) Router.push('/');\n            _context2.next = 20;\n            return _regeneratorRuntime.awrap(_request2.json());\n\n          case 20:\n            _res2 = _context2.sent;\n            alert(_res2);\n\n          case 22:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-917502157\" + \" \" + \"features\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, __jsx(CommentList, {\n    ref: formRef,\n    id: id,\n    comment: comment,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    ref: function ref(_ref2) {\n      return buAllRef = _ref2;\n    },\n    className: \"jsx-917502157\" + \" \" + \"button-All\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    onClick: likeEv,\n    className: \"jsx-917502157\" + \" \" + \"like\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"jsx-917502157\" + \" \" + 'iconfont icon-dianzan',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), __jsx(\"h4\", {\n    className: \"jsx-917502157\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"Like\")), __jsx(\"div\", {\n    onClick: saveEv,\n    className: \"jsx-917502157\" + \" \" + \"save\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"jsx-917502157\" + \" \" + 'iconfont icon-shoucang',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), __jsx(\"h4\", {\n    className: \"jsx-917502157\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"save\")), __jsx(\"div\", {\n    onClick: commentEv,\n    className: \"jsx-917502157\" + \" \" + \"comment\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"jsx-917502157\" + \" \" + 'iconfont icon-pinglun',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), __jsx(\"h4\", {\n    className: \"jsx-917502157\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"comment\")), __jsx(\"div\", {\n    className: \"jsx-917502157\" + \" \" + \"share\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"jsx-917502157\" + \" \" + 'iconfont icon-fenxiang',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }), __jsx(\"h4\", {\n    className: \"jsx-917502157\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"share\"))), __jsx(_JSXStyle, {\n    id: \"917502157\",\n    __self: this\n  }, \"i.jsx-917502157{font-size:30px;margin-right:6px;}.icon-dianzan1.jsx-917502157{color:#E84F43;-webkit-animation:click-jsx-917502157 0.5s 1;animation:click-jsx-917502157 0.5s 1;}.icon-shoucang1.jsx-917502157{color:#FFF710;-webkit-animation:click-jsx-917502157 0.5s 1;animation:click-jsx-917502157 0.5s 1;}@-webkit-keyframes click-jsx-917502157{0%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}100%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}}@keyframes click-jsx-917502157{0%{-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}100%{-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}}.button-All.jsx-917502157{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:8vh;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.button-All.jsx-917502157>div.jsx-917502157{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;height:6vh;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:4vh;opacity:0.5;}.button-All.jsx-917502157>div.jsx-917502157:hover{opacity:1;}.like.jsx-917502157{margin-left:4vh;}.share.jsx-917502157 svg.jsx-917502157{margin-right:0.4vh;}svg.jsx-917502157{height:50%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFx0ZXN0XFxjb21wb25lbnRcXGhvbWVcXG1haW5cXHBvc3RsaXN0XFxsaXN0XFxmZWF0dXJlcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFxR3lCLEFBR3FDLEFBSUQsQUFJQSxBQVFkLEFBR0EsQUFHVyxBQU9HLEFBU0osQUFHTSxBQUdLLEFBR1YsVUFSZCxDQWhCZ0IsQUF5QmhCLEdBM0MwQixBQUlBLENBUk4sQ0F5Q3BCLEdBR0EsYUEzQ0EscUNBY0ksQUFHQSxLQVdPLFdBTkcsV0FsQmQsQUFJQSxBQWVzQixXQU1QLFdBQ1ksdUVBTk0sNEJBT1YsdUZBTnZCLE1BT3FCLGlCQUNMLFlBQ2hCIiwiZmlsZSI6IkM6XFx0ZXN0XFxjb21wb25lbnRcXGhvbWVcXG1haW5cXHBvc3RsaXN0XFxsaXN0XFxmZWF0dXJlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCx7dXNlRWZmZWN0fSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IENvbW1lbnRMaXN0IGZyb20gJy4vZmVhdHVyZXMtY29tbWVudCdcclxuaW1wb3J0IFJvdXRlciAgZnJvbSAnbmV4dC9yb3V0ZXInXHJcblxyXG5mdW5jdGlvbiBGZWF0dXJlcyh7aWQsY29tbWVudCxtZXNzYWdlfSkge1xyXG4gICAgbGV0IGZvcm1SZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTtcclxuICAgIGxldCBidUFsbFJlZjtcclxuXHJcbiAgICB1c2VFZmZlY3QoKCkgPT4geyAgICAgICAgICAgICAgICAgICAgICAvL+WIpOaWreW4luWtkOS4reaYr+WQpuaUtuiXjyDngrnotZ7ov4dcclxuICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKVxyXG4gICAgICAgaWYobWVzc2FnZSl7ICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IG1lc3NhZ2UubGlrZS5maW5kSW5kZXgoZSA9PiBlLnBvc3RJZCA9PSBpZCk7XHJcbiAgICAgICAgICAgIGlmKHJlc3VsdCAhPSAtMSApe1xyXG4gICAgICAgICAgICBidUFsbFJlZi5jaGlsZHJlblswXS5jaGlsZHJlblswXS5jbGFzc0xpc3QuYWRkKCdpY29uLWRpYW56YW4xJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHJlc3VsdDIgPSBtZXNzYWdlLnNhdmUuZmluZEluZGV4KGUgPT4gZS5wb3N0SWQgPT0gaWQpO1xyXG4gICAgICAgICAgICBpZihyZXN1bHQyICE9IC0xICl7XHJcbiAgICAgICAgICAgIGJ1QWxsUmVmLmNoaWxkcmVuWzFdLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5hZGQoJ2ljb24tc2hvdWNhbmcxJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgIH0gICAgICAgXHJcbiAgICB9LFtdKVxyXG4gICAgY29uc3QgY29tbWVudEV2ID0gKCkgPT4geyAgICAgICAgLy/miZPlvIDor4TorrrnlYzpnaLmjInpkq7kuovku7ZcclxuICAgICAgICAgICBsZXQgZm9ybSA9IGZvcm1SZWYuY3VycmVudDtcclxuICAgICAgICAgICBpZihnZXRDb21wdXRlZFN0eWxlKGZvcm0pLmRpc3BsYXkgPT0gJ25vbmUnKXtcclxuICAgICAgICAgICAgICAgIGZvcm0uc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoIWZvcm0uaGlkZGVuKSBmb3JtLmNoaWxkcmVuWzBdLmZvY3VzKCk7XHJcbiAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBmb3JtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7ICAgICAgICAgICBcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgXHJcbiAgICB9XHJcbiAgICBjb25zdCBzYXZlRXYgPSBhc3luYyAoZSkgPT4ge1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSBlLnRhcmdldC5jbG9zZXN0KCcuc2F2ZScpLmNoaWxkcmVuWzBdOyAvL+WumuS5iXNhdmXmjInpkq7lhYPntKBcclxuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnaWNvbi1zaG91Y2FuZzEnKTtcclxuICAgICAgICBpZih0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpY29uLXNob3VjYW5nMScpKXsgICAgIFxyXG4gICAgICAgICAgICBsZXQgcmVxdWVzdCA9IGF3YWl0IGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjMwMDEvcG9zdC9zYXZlLyR7aWR9YCx7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6J1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBpZihyZXF1ZXN0LnN0YXR1cyA9PSA0MDQpIFJvdXRlci5wdXNoKCcvJylcclxuICAgICAgICAgICAgaWYocmVxdWVzdC5zdGF0dXMgPT0gMzAzKSB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnaWNvbi1zaG91Y2FuZzEnKTtcclxuICAgICAgICAgICAgbGV0IHJlcyA9YXdhaXQgIHJlcXVlc3QuanNvbigpO1xyXG4gICAgICAgICAgICBhbGVydChyZXMpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IHJlcXVlc3QgPSBhd2FpdCBmZXRjaChgaHR0cDovL2xvY2FsaG9zdDozMDAxL3Bvc3Qvc2F2ZS9yZW1vdmUvJHtpZH1gLHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDonUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogXCJpbmNsdWRlXCIsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGlmKHJlcXVlc3Quc3RhdHVzID09IDQwNCkgUm91dGVyLnB1c2goJy8nKVxyXG4gICAgICAgICAgICBsZXQgcmVzID1hd2FpdCAgcmVxdWVzdC5qc29uKCk7XHJcbiAgICAgICAgICAgIGFsZXJ0KHJlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgbGlrZUV2ID0gYXN5bmMgKGUpID0+IHtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQuY2xvc2VzdCgnLmxpa2UnKS5jaGlsZHJlblswXTsgLy/lrprkuYlsaWtl5oyJ6ZKu5YWD57SgXHJcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2ljb24tZGlhbnphbjEnKTtcclxuICAgICAgICBpZih0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpY29uLWRpYW56YW4xJykpeyAgICAgXHJcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMS9wb3N0L2xpa2UvJHtpZH1gLHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDonUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogXCJpbmNsdWRlXCIsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGlmKHJlcXVlc3Quc3RhdHVzID09IDQwNCkgUm91dGVyLnB1c2goJy8nKVxyXG4gICAgICAgICAgICBpZihyZXF1ZXN0LnN0YXR1cyA9PSAzMDMpIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdpY29uLWRpYW56YW4xJyk7XHJcbiAgICAgICAgICAgIGxldCByZXMgPWF3YWl0ICByZXF1ZXN0Lmpzb24oKTtcclxuICAgICAgICAgICAgYWxlcnQocmVzKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCByZXF1ZXN0ID0gYXdhaXQgZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMS9wb3N0L2xpa2UvcmVtb3ZlLyR7aWR9YCx7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6J1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwiaW5jbHVkZVwiLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBpZihyZXF1ZXN0LnN0YXR1cyA9PSA0MDQpIFJvdXRlci5wdXNoKCcvJylcclxuICAgICAgICAgICAgbGV0IHJlcyA9YXdhaXQgIHJlcXVlc3QuanNvbigpO1xyXG4gICAgICAgICAgICBhbGVydChyZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICBcclxuICAgIH1cclxuICAgIHJldHVybiAoXHJcbiAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZlYXR1cmVzXCI+XHJcbiAgICAgICAgICAgPENvbW1lbnRMaXN0IHJlZiA9e2Zvcm1SZWZ9IGlkID17aWR9IGNvbW1lbnQ9e2NvbW1lbnR9Lz5cclxuICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImJ1dHRvbi1BbGxcIiByZWY9e3JlZiA9PiBidUFsbFJlZiA9IHJlZn0+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxpa2VcIiBvbkNsaWNrPXtsaWtlRXZ9PiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0naWNvbmZvbnQgaWNvbi1kaWFuemFuJz48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgPGg0Pkxpa2U8L2g0PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNhdmVcIiBvbkNsaWNrPXtzYXZlRXZ9PlxyXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0naWNvbmZvbnQgaWNvbi1zaG91Y2FuZyc+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoND5zYXZlPC9oND5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21tZW50XCIgb25DbGljaz17Y29tbWVudEV2fT5cclxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9J2ljb25mb250IGljb24tcGluZ2x1bic+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoND5jb21tZW50PC9oND5cclxuICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaGFyZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT0naWNvbmZvbnQgaWNvbi1mZW54aWFuZyc+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoND5zaGFyZTwvaDQ+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxzdHlsZSBqc3g+IHtgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICBpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTozMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OjZweDtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAuaWNvbi1kaWFuemFuMSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb2xvcjojRTg0RjQzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOmNsaWNrIDAuNXMgMTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAuaWNvbi1zaG91Y2FuZzF7XHJcbiAgICAgICAgICAgICAgICAgICAgICBjb2xvcjojRkZGNzEwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOmNsaWNrIDAuNXMgMTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgIEBrZXlmcmFtZXMgY2xpY2sge1xyXG4gICAgICAgICAgICAgICAgICAgICAgMCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTpzY2FsZSgwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgMTAwJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOnNjYWxlKDEpXHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgLmJ1dHRvbi1BbGwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTAwJTtcclxuICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ZmxleDtcclxuICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDo4dmg7XHJcbiAgICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczpjZW50ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAuYnV0dG9uLUFsbD5kaXYge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ZmxleDtcclxuICAgICAgICAgICAgICAgICAgICAgICBmbGV4OjE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OjZ2aDtcclxuICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6NHZoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6MC41O1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIC5idXR0b24tQWxsPmRpdjpob3ZlciB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OjE7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgLmxpa2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6NHZoO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIC5zaGFyZSBzdmcge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6MC40dmg7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgc3ZnIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDo1MCU7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYH1cclxuICAgICAgIDwvc3R5bGU+XHJcbiAgICAgICAgPC9kaXY+IFxyXG4gICAgKVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRmVhdHVyZXNcclxuIl19 */\\n/*@ sourceURL=C:\\\\\\\\test\\\\\\\\component\\\\\\\\home\\\\\\\\main\\\\\\\\postlist\\\\\\\\list\\\\\\\\features.js */\"));\n}\n\nexport default Features;","map":{"version":3,"sources":["C:/test/component/home/main/postlist/list/features.js"],"names":["React","useEffect","CommentList","Router","Features","id","comment","message","formRef","createRef","buAllRef","console","log","result","like","findIndex","e","postId","children","classList","add","result2","save","commentEv","form","current","getComputedStyle","display","style","hidden","focus","saveEv","target","closest","toggle","contains","fetch","method","credentials","request","status","push","remove","json","res","alert","likeEv","ref"],"mappings":"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","sourcesContent":["import React,{useEffect} from 'react'\r\nimport CommentList from './features-comment'\r\nimport Router  from 'next/router'\r\n\r\nfunction Features({id,comment,message}) {\r\n    let formRef = React.createRef();\r\n    let buAllRef;\r\n\r\n    useEffect(() => {                      //判断帖子中是否收藏 点赞过\r\n        console.log(message)\r\n       if(message){           \r\n            let result = message.like.findIndex(e => e.postId == id);\r\n            if(result != -1 ){\r\n            buAllRef.children[0].children[0].classList.add('icon-dianzan1');\r\n            }\r\n            let result2 = message.save.findIndex(e => e.postId == id);\r\n            if(result2 != -1 ){\r\n            buAllRef.children[1].children[0].classList.add('icon-shoucang1');\r\n            }\r\n       }       \r\n    },[])\r\n    const commentEv = () => {        //打开评论界面按钮事件\r\n           let form = formRef.current;\r\n           if(getComputedStyle(form).display == 'none'){\r\n                form.style.display = 'flex';           \r\n                if(!form.hidden) form.children[0].focus();\r\n           }else{\r\n                form.style.display = 'none';           \r\n           }\r\n           \r\n    }\r\n    const saveEv = async (e) => {\r\n        let target = e.target.closest('.save').children[0]; //定义save按钮元素\r\n        target.classList.toggle('icon-shoucang1');\r\n        if(target.classList.contains('icon-shoucang1')){     \r\n            let request = await fetch(`http://localhost:3001/post/save/${id}`,{\r\n                method:'POST',\r\n                credentials: \"include\",\r\n            })\r\n            if(request.status == 404) Router.push('/')\r\n            if(request.status == 303) target.classList.remove('icon-shoucang1');\r\n            let res =await  request.json();\r\n            alert(res);\r\n        }else{\r\n            \r\n            let request = await fetch(`http://localhost:3001/post/save/remove/${id}`,{\r\n                method:'POST',\r\n                credentials: \"include\",\r\n            })\r\n            if(request.status == 404) Router.push('/')\r\n            let res =await  request.json();\r\n            alert(res);\r\n        }\r\n    }\r\n    const likeEv = async (e) => {\r\n        let target = e.target.closest('.like').children[0]; //定义like按钮元素\r\n        target.classList.toggle('icon-dianzan1');\r\n        if(target.classList.contains('icon-dianzan1')){     \r\n            let request = await fetch(`http://localhost:3001/post/like/${id}`,{\r\n                method:'POST',\r\n                credentials: \"include\",\r\n            })\r\n            if(request.status == 404) Router.push('/')\r\n            if(request.status == 303) target.classList.remove('icon-dianzan1');\r\n            let res =await  request.json();\r\n            alert(res);\r\n        }else{\r\n            \r\n            let request = await fetch(`http://localhost:3001/post/like/remove/${id}`,{\r\n                method:'POST',\r\n                credentials: \"include\",\r\n            })\r\n            if(request.status == 404) Router.push('/')\r\n            let res =await  request.json();\r\n            alert(res);\r\n        }\r\n\r\n        \r\n       \r\n    }\r\n    return (\r\n       <div className=\"features\">\r\n           <CommentList ref ={formRef} id ={id} comment={comment}/>\r\n           <div className=\"button-All\" ref={ref => buAllRef = ref}>\r\n                <div className=\"like\" onClick={likeEv}>                  \r\n                    <i className='iconfont icon-dianzan'></i>\r\n                    <h4>Like</h4>\r\n                </div>\r\n                <div className=\"save\" onClick={saveEv}>\r\n                    <i className='iconfont icon-shoucang'></i>\r\n                    <h4>save</h4>\r\n                </div>\r\n                <div className=\"comment\" onClick={commentEv}>\r\n                    <i className='iconfont icon-pinglun'></i>\r\n                    <h4>comment</h4>\r\n                </div>\r\n                <div className=\"share\">\r\n                    <i className='iconfont icon-fenxiang'></i>\r\n                    <h4>share</h4>\r\n                </div>\r\n            </div>\r\n            <style jsx> {`                \r\n                  i {\r\n                      font-size:30px;\r\n                      margin-right:6px;\r\n                  }\r\n                  .icon-dianzan1 {\r\n                      color:#E84F43;\r\n                      animation:click 0.5s 1;\r\n                  }\r\n                  .icon-shoucang1{\r\n                      color:#FFF710;\r\n                      animation:click 0.5s 1;\r\n                  }\r\n\r\n\r\n                  @keyframes click {\r\n                      0% {\r\n                          transform:scale(0)\r\n                      }\r\n                      100% {\r\n                          transform:scale(1)\r\n                      }\r\n                  }\r\n                  .button-All {\r\n                      width:100%;\r\n                      display:flex;\r\n                      height:8vh;\r\n                      align-items:center;\r\n                      justify-content:space-between;\r\n                  }\r\n                  .button-All>div {\r\n                       display:flex;\r\n                       flex:1;\r\n                       height:6vh;\r\n                       justify-content:center;\r\n                       align-items:center;\r\n                       margin-right:4vh;\r\n                       opacity:0.5;\r\n                  }\r\n                  .button-All>div:hover {\r\n                      opacity:1;\r\n                  }\r\n                  .like {\r\n                      margin-left:4vh;\r\n                  }\r\n                  .share svg {\r\n                        margin-right:0.4vh;\r\n                  }\r\n                  svg {\r\n                      height:50%;\r\n                  }\r\n                        `}\r\n       </style>\r\n        </div> \r\n    )\r\n}\r\n\r\n\r\nexport default Features\r\n"]},"metadata":{},"sourceType":"module"}