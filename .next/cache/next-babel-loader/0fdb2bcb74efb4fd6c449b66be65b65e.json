{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nvar _jsxFileName = \"C:\\\\test\\\\component\\\\home\\\\main\\\\postlist\\\\list\\\\features-comment.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { ADD } from '../../redux/action';\nvar FeaturesComment = React.forwardRef(function (props, ref) {\n  var _useState = useState(''),\n      comment = _useState[0],\n      setComment = _useState[1];\n\n  var _useState2 = useState(props.comment),\n      commentList = _useState2[0],\n      setCommentList = _useState2[1];\n\n  var addComment = function addComment(e) {\n    var commentData, request, res;\n    return _regeneratorRuntime.async(function addComment$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            // 添加评论事件\n            e.preventDefault();\n            commentData = new FormData();\n            commentData.append('comment', comment);\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(fetch(\"http://localhost:3001/post/comment/\".concat(props.id), {\n              method: 'POST',\n              body: commentData,\n              credentials: \"include\"\n            }));\n\n          case 5:\n            request = _context.sent;\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(request.json());\n\n          case 8:\n            res = _context.sent;\n\n            if (typeof res == 'object') {\n              setCommentList(res);\n            }\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var inputEv = function inputEv(e) {\n    if (e.target.value.length > 0) {\n      ref.current.children[1].classList.add('pink');\n    } else {\n      ref.current.children[1].classList.remove('pink');\n    }\n\n    setComment(e.target.value);\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-210347145\" + \" \" + \"comment-list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, __jsx(\"ul\", {\n    className: \"jsx-210347145\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, commentList.map(function (e) {\n    return __jsx(\"li\", {\n      className: \"jsx-210347145\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }, e.comment, \"\\uD83D\\uDC97\");\n  })), __jsx(\"form\", {\n    ref: ref,\n    onSubmit: addComment,\n    hidden: true,\n    className: \"jsx-210347145\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"comment\",\n    onInput: inputEv,\n    value: comment,\n    required: true,\n    placeholder: \"\\u8F93\\u5165\\u5185\\u5BB9\",\n    className: \"jsx-210347145\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    onClick: function onClick(e) {\n      e.target.closest('.button').nextElementSibling.click();\n    },\n    className: \"jsx-210347145\" + \" \" + \"button\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"jsx-210347145\" + \" \" + 'iconfont icon-send',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  })), __jsx(\"input\", {\n    type: \"submit\",\n    value: \"add\",\n    hidden: true,\n    className: \"jsx-210347145\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  })), __jsx(_JSXStyle, {\n    id: \"210347145\",\n    __self: this\n  }, \".button.jsx-210347145{-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-radius:50%;}.button.jsx-210347145:hover>i.jsx-210347145{-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);background:#1a79ff;color:white;}.button.jsx-210347145>i.jsx-210347145{font-size:1.6rem;padding:10px;border-radius:50%;}form.jsx-210347145{width:100%;height:6vh;background:white;border-radius:24px;margin:4vh 0 0;display:none;}input[type=submit].jsx-210347145{color:white;}.pink.jsx-210347145{background:pink;}form.jsx-210347145>input.jsx-210347145{-webkit-flex:9;-ms-flex:9;flex:9;text-align:center;height:100%;border:2px solid #f4f6f8;font-size:3vh;padding:0 2vh;outline:none;}input[type=text].jsx-210347145{color:white;}form.jsx-210347145>input.jsx-210347145:focus{background:#eeeef4;}.comment-list.jsx-210347145{width:100%;margin:4vh 0 2vh;}ul.jsx-210347145{width:80%;margin-left:10%;list-style:none;}li.jsx-210347145{width:100%;height:2vh;margin:1vh;text-align:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFx0ZXN0XFxjb21wb25lbnRcXGhvbWVcXG1haW5cXHBvc3RsaXN0XFxsaXN0XFxmZWF0dXJlcy1jb21tZW50LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXdEb0IsQUFJNkIsQUFPYyxBQUtKLEFBS04sQUFRRCxBQUdNLEFBR1QsQUFTSyxBQUdPLEFBR1IsQUFJRCxBQUtDLFVBSkssQ0FqQ0wsQUE2Qk8sQUFTUCxDQTlCZCxBQWVBLElBWkEsQ0FoQmdCLEVBK0JoQixHQXpCb0IsQUFzQ04sSUFMSyxFQUpuQixFQWxDcUIsR0FiTCxBQStCSyxBQTBCQSxNQXRDQyxHQWlDdEIsTUF0Q0EsR0FrQmUsQUEwQmYsT0F0Q21CLEtBYVUsVUFaYixFQWRNLFdBZXRCLEVBWWlCLE1BMUJGLFFBMkJFLElBMUJqQixDQVIwQixTQW1DVixhQUNoQiw2RUFuQ3NCLDZGQUNELGtCQUNyQiIsImZpbGUiOiJDOlxcdGVzdFxcY29tcG9uZW50XFxob21lXFxtYWluXFxwb3N0bGlzdFxcbGlzdFxcZmVhdHVyZXMtY29tbWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCx7dXNlU3RhdGV9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gJ3JlYWN0LXJlZHV4J1xyXG5pbXBvcnQge0FERH0gZnJvbSAnLi4vLi4vcmVkdXgvYWN0aW9uJ1xyXG5cclxuXHJcbmNvbnN0ICBGZWF0dXJlc0NvbW1lbnQgPSBSZWFjdC5mb3J3YXJkUmVmKChwcm9wcywgcmVmKSA9PiB7XHJcbiAgICAgIGNvbnN0IFtjb21tZW50LCBzZXRDb21tZW50XSA9IHVzZVN0YXRlKCcnKTsgXHJcbiAgICAgIGNvbnN0IFtjb21tZW50TGlzdCxzZXRDb21tZW50TGlzdF0gPSB1c2VTdGF0ZShwcm9wcy5jb21tZW50KTtcclxuXHJcbiAgICAgIGNvbnN0IGFkZENvbW1lbnQgPSBhc3luYyAoZSkgPT4geyAgICAvLyDmt7vliqDor4Torrrkuovku7ZcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgbGV0IGNvbW1lbnREYXRhID0gbmV3IEZvcm1EYXRhKClcclxuICAgICAgICBjb21tZW50RGF0YS5hcHBlbmQoJ2NvbW1lbnQnLGNvbW1lbnQpO1xyXG4gICAgICAgIGxldCByZXF1ZXN0ID0gYXdhaXQgIGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjMwMDEvcG9zdC9jb21tZW50LyR7cHJvcHMuaWR9YCx7XHJcbiAgICAgICAgICAgIG1ldGhvZDonUE9TVCcsXHJcbiAgICAgICAgICAgIGJvZHk6Y29tbWVudERhdGEsICAgIFxyXG4gICAgICAgICAgICBjcmVkZW50aWFsczogXCJpbmNsdWRlXCIsICAgICAgICBcclxuICAgICAgICB9KVxyXG4gICAgICAgIGxldCByZXMgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuICAgICAgICBpZih0eXBlb2YgcmVzID09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgIHNldENvbW1lbnRMaXN0KHJlcylcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBpbnB1dEV2ID0gKGUpID0+IHtcclxuICAgICAgICBpZihlLnRhcmdldC52YWx1ZS5sZW5ndGg+MCl7XHJcbiAgICAgICAgICAgICByZWYuY3VycmVudC5jaGlsZHJlblsxXS5jbGFzc0xpc3QuYWRkKCdwaW5rJyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJlZi5jdXJyZW50LmNoaWxkcmVuWzFdLmNsYXNzTGlzdC5yZW1vdmUoJ3BpbmsnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0Q29tbWVudChlLnRhcmdldC52YWx1ZSlcclxuICAgIH1cclxuICAgIHJldHVybiAoXHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21tZW50LWxpc3RcIj5cclxuICAgICAgICAgICAgICAgPHVsPlxyXG4gICAgICAgICAgICAgICAgICAge2NvbW1lbnRMaXN0Lm1hcChlID0+IDxsaT57ZS5jb21tZW50ffCfkpc8L2xpPil9XHJcbiAgICAgICAgICAgICAgICAgICB7LyogPGxpPiDtlZHtgawg8J+SlzwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICA8bGk+IHNvIGJlYXV0aWZ1bDwvbGk+XHJcbiAgICAgICAgICAgICAgICAgICA8bGk+IO2Vke2BrCDwn5KXPC9saT5cclxuICAgICAgICAgICAgICAgICAgIDxsaT4gWUEgQUxMQUhISCBERUtFVCBCQU5HRVRUVFQ8L2xpPlxyXG4gICAgICAgICAgICAgICAgICAgPGxpPiDtlZHtgawg8J+SlzwvbGk+ICovfVxyXG4gICAgICAgICAgICAgICA8L3VsPlxyXG4gICAgICAgICAgICAgICA8Zm9ybSByZWY9e3JlZn0gb25TdWJtaXQ9IHthZGRDb21tZW50fSBoaWRkZW4gPlxyXG4gICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImNvbW1lbnRcIiBcclxuICAgICAgICAgICAgICAgICAgICAgb25JbnB1dD17aW5wdXRFdn1cclxuICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPXsgY29tbWVudCB9XHJcbiAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkXHJcbiAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPSfovpPlhaXlhoXlrrknXHJcbiAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYnV0dG9uXCIgb25DbGljaz17KGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy5idXR0b24nKS5uZXh0RWxlbWVudFNpYmxpbmcuY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIH19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3NOYW1lPSdpY29uZm9udCBpY29uLXNlbmQnPjwvaT5cclxuICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwic3VibWl0XCIgdmFsdWU9XCJhZGRcIiBoaWRkZW4vPlxyXG4gICAgICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XHJcbiAgICAgICAgICAgICAgICAgICB7YFxyXG4gICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgLmJ1dHRvbiB7ICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgZmxleDoxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTpmbGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OmNlbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOmNlbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6NTAlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIC5idXR0b246aG92ZXI+aSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06c2NhbGUoMS4xKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IzFhNzlmZjtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOndoaXRlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIC5idXR0b24+aSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6MS42cmVtOyBcclxuICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6MTBweDtcclxuICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6NTAlOyAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGZvcm0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTAwJTtcclxuICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDo2dmg7XHJcbiAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOndoaXRlOyAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czoyNHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOjR2aCAwIDAgOyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6bm9uZTtcclxuICAgICAgICAgICAgICAgICAgfSAgXHJcbiAgICAgICAgICAgICAgICAgIGlucHV0W3R5cGU9c3VibWl0XSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6d2hpdGU7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgLnBpbmsge1xyXG4gICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDpwaW5rOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgZm9ybT5pbnB1dCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmbGV4Ojk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOmNlbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDoxMDAlOyAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNmNGY2Zjg7XHJcbiAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6M3ZoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzowIDJ2aDtcclxuICAgICAgICAgICAgICAgICAgICAgIG91dGxpbmU6bm9uZTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBpbnB1dFt0eXBlPXRleHRdIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOndoaXRlO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGZvcm0+aW5wdXQ6Zm9jdXMge1xyXG4gICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDojZWVlZWY0O1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIC5jb21tZW50LWxpc3Qge1xyXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTAwJTtcclxuICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjo0dmggMCAydmggO1xyXG4gICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICB1bCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB3aWR0aDo4MCU7XHJcbiAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDoxMCU7XHJcbiAgICAgICAgICAgICAgICAgICAgICBsaXN0LXN0eWxlOm5vbmU7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgbGkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTAwJTtcclxuICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDoydmg7XHJcbiAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46MXZoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjpjZW50ZXI7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIGB9XHJcbiAgICAgICAgICAgICAgIDwvc3R5bGU+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApXHJcbiAgICB9KVxyXG5jb25zdCBkaXNwYXRjaFRvUHJvcHMgPSBkaXNwYXRjaCA9PiAoe1xyXG4gICAgQ2xpY2socG9zdCkge1xyXG4gICAgICAgIGRpc3BhdGNoKEFERChwb3N0KSlcclxuICAgIH1cclxufSlcclxuY29uc3Qgc3RhdGVUb1Byb3BzID0gc3RhdGUgPT4gKHsgICAgICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCAgY29ubmVjdChudWxsLGRpc3BhdGNoVG9Qcm9wcyxudWxsLHtmb3J3YXJkUmVmOiB0cnVlfSkoRmVhdHVyZXNDb21tZW50KVxyXG4iXX0= */\\n/*@ sourceURL=C:\\\\\\\\test\\\\\\\\component\\\\\\\\home\\\\\\\\main\\\\\\\\postlist\\\\\\\\list\\\\\\\\features-comment.js */\"));\n});\n\nvar dispatchToProps = function dispatchToProps(dispatch) {\n  return {\n    Click: function Click(post) {\n      dispatch(ADD(post));\n    }\n  };\n};\n\nvar stateToProps = function stateToProps(state) {\n  return {};\n};\n\nexport default connect(null, dispatchToProps, null, {\n  forwardRef: true\n})(FeaturesComment);","map":{"version":3,"sources":["C:/test/component/home/main/postlist/list/features-comment.js"],"names":["React","useState","connect","ADD","FeaturesComment","forwardRef","props","ref","comment","setComment","commentList","setCommentList","addComment","e","preventDefault","commentData","FormData","append","fetch","id","method","body","credentials","request","json","res","inputEv","target","value","length","current","children","classList","add","remove","map","closest","nextElementSibling","click","dispatchToProps","dispatch","Click","post","stateToProps","state"],"mappings":"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","sourcesContent":["import React,{useState} from 'react'\r\nimport {connect} from 'react-redux'\r\nimport {ADD} from '../../redux/action'\r\n\r\n\r\nconst  FeaturesComment = React.forwardRef((props, ref) => {\r\n      const [comment, setComment] = useState(''); \r\n      const [commentList,setCommentList] = useState(props.comment);\r\n\r\n      const addComment = async (e) => {    // 添加评论事件\r\n        e.preventDefault();\r\n        let commentData = new FormData()\r\n        commentData.append('comment',comment);\r\n        let request = await  fetch(`http://localhost:3001/post/comment/${props.id}`,{\r\n            method:'POST',\r\n            body:commentData,    \r\n            credentials: \"include\",        \r\n        })\r\n        let res = await request.json();\r\n        if(typeof res == 'object') {\r\n            setCommentList(res)\r\n        }\r\n    }\r\n    const inputEv = (e) => {\r\n        if(e.target.value.length>0){\r\n             ref.current.children[1].classList.add('pink');\r\n        }else{\r\n            ref.current.children[1].classList.remove('pink');\r\n        }\r\n        setComment(e.target.value)\r\n    }\r\n    return (\r\n        <div className=\"comment-list\">\r\n               <ul>\r\n                   {commentList.map(e => <li>{e.comment}💗</li>)}\r\n                   {/* <li> 핑크 💗</li>\r\n                   <li> so beautiful</li>\r\n                   <li> 핑크 💗</li>\r\n                   <li> YA ALLAHHH DEKET BANGETTTT</li>\r\n                   <li> 핑크 💗</li> */}\r\n               </ul>\r\n               <form ref={ref} onSubmit= {addComment} hidden >\r\n                   <input type=\"text\" name=\"comment\" \r\n                     onInput={inputEv}\r\n                     value ={ comment }\r\n                     required\r\n                     placeholder='输入内容'\r\n                     />\r\n                     <div className=\"button\" onClick={(e) => {\r\n                            e.target.closest('.button').nextElementSibling.click();\r\n                         }}>\r\n                         <i className='iconfont icon-send'></i>\r\n                     </div>\r\n                     <input type=\"submit\" value=\"add\" hidden/>\r\n               </form>\r\n               <style jsx>\r\n                   {`\r\n                  \r\n                  .button {                      \r\n                      flex:1;\r\n                      display:flex;\r\n                      justify-content:center;\r\n                      align-items:center;\r\n                      border-radius:50%;\r\n                  }\r\n                  .button:hover>i {\r\n                      transform:scale(1.1);\r\n                      background:#1a79ff;\r\n                      color:white;\r\n                  }\r\n                  .button>i {\r\n                      font-size:1.6rem; \r\n                      padding:10px;\r\n                      border-radius:50%;                     \r\n                  }\r\n                  form {\r\n                      width:100%;\r\n                      height:6vh;\r\n                      background:white;                     \r\n                      border-radius:24px;\r\n                      margin:4vh 0 0 ;                \r\n                      display:none;\r\n                  }  \r\n                  input[type=submit] {\r\n                    color:white;\r\n                  }\r\n                  .pink {\r\n                      background:pink;                    \r\n                  }\r\n                  form>input {\r\n                      flex:9;\r\n                      text-align:center;\r\n                      height:100%;                      \r\n                      border: 2px solid #f4f6f8;\r\n                      font-size:3vh;\r\n                      padding:0 2vh;\r\n                      outline:none;\r\n                  }\r\n                  input[type=text] {\r\n                      color:white;\r\n                  }\r\n                  form>input:focus {\r\n                      background:#eeeef4;\r\n                  }\r\n                  .comment-list {\r\n                      width:100%;\r\n                      margin:4vh 0 2vh ;\r\n                  } \r\n                  ul {\r\n                      width:80%;\r\n                      margin-left:10%;\r\n                      list-style:none;\r\n                  }\r\n                  li {\r\n                      width:100%;\r\n                      height:2vh;\r\n                      margin:1vh;\r\n                      text-align:center;\r\n                  }\r\n                   `}\r\n               </style>\r\n        </div>\r\n    )\r\n    })\r\nconst dispatchToProps = dispatch => ({\r\n    Click(post) {\r\n        dispatch(ADD(post))\r\n    }\r\n})\r\nconst stateToProps = state => ({       });\r\n\r\n\r\n\r\n\r\nexport default  connect(null,dispatchToProps,null,{forwardRef: true})(FeaturesComment)\r\n"]},"metadata":{},"sourceType":"module"}