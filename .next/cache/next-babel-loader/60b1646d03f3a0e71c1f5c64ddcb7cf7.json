{"ast":null,"code":"var _jsxFileName = \"C:\\\\test\\\\component\\\\login\\\\form.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Input from './input.js';\nimport Router from 'next/router';\nimport Loading from '../public/loading';\n\nfunction Form({\n  Ev\n}) {\n  const {\n    0: accountOk,\n    1: setAccountOk\n  } = useState(false);\n  const {\n    0: fetching,\n    1: setFetching\n  } = useState(false); // 账号检测状态\n\n  let buttonRef; // 按钮Ref定义\n\n  let animaRef; // 动画Ref\n\n  let accountRef = React.createRef();\n  let passwordRef = React.createRef(); //提交事件     \n\n  const submitevent = async e => {\n    e.preventDefault();\n    let formdata = new FormData(e.target);\n    let request = await fetch('http://localhost:3001/login', {\n      method: 'POST',\n      body: formdata,\n      credentials: \"include\"\n    });\n\n    if (request.ok) {\n      let a = document.querySelector('a');\n      a.click();\n    } else {\n      Ev('密码错误');\n    }\n  }; //账号验证事件\n\n\n  const ACCright = e => {\n    if (accountRef.current.children[1].value === '') return Ev('请输入账号');\n\n    if (!accountOk) {\n      e.preventDefault();\n      animaRef.classList.add('require');\n      let account = accountRef.current.children[1].value;\n      fetch(`http://localhost:3001/login/${account}`, {\n        method: 'GET'\n      }).then(res => {\n        try {\n          if (res.ok) {\n            anima();\n            setAccountOk(true);\n          } else {\n            animaRef.classList.remove('require');\n            Ev('账号不存在');\n          }\n        } catch (err) {\n          console.log(err);\n        }\n      });\n\n      const anima = () => {\n        accountRef.current.style.opacity = 0;\n        passwordRef.current.style.opacity = 1;\n        passwordRef.current.style.visibility = true;\n        animaRef.classList.remove('require');\n        buttonRef.classList.remove('buttonstatus');\n      };\n    }\n  }; //动画事件 线条渐变效果\n\n\n  const LineColor = select => {\n    if (select < 1) {\n      animaRef.classList.remove('require');\n    } else {\n      animaRef.classList.add('require');\n    }\n  }; //动画事件 线条渐变效果\n\n\n  const buttonColor = select => {\n    if (select < 1) {\n      buttonRef.classList.remove('buttonstatus');\n    } else {\n      buttonRef.classList.add('buttonstatus');\n    }\n  };\n\n  return __jsx(\"div\", {\n    id: \"accform\",\n    className: \"jsx-3028285870\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    href: \"http://localhost:3000/home\",\n    style: {\n      display: 'none'\n    },\n    className: \"jsx-3028285870\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \" click\"), __jsx(\"form\", {\n    onSubmit: submitevent,\n    className: \"jsx-3028285870\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"jsx-3028285870\" + \" \" + \"div\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, __jsx(Input, {\n    event: LineColor,\n    buevent: buttonColor,\n    type: \"account\",\n    ref: accountRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), __jsx(Input, {\n    event: LineColor,\n    buevent: buttonColor,\n    type: \"password\",\n    ref: passwordRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  })), __jsx(\"div\", {\n    ref: ref => animaRef = ref,\n    className: \"jsx-3028285870\" + \" \" + 'anima',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }), __jsx(\"button\", {\n    ref: ref => buttonRef = ref,\n    onClick: ACCright,\n    className: \"jsx-3028285870\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, !fetching ? 'continue' : __jsx(Loading, {\n    color: \"white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }))), __jsx(_JSXStyle, {\n    id: \"3028285870\",\n    __self: this\n  }, \"#accform.jsx-3028285870{width:30%;margin:0 auto;margin-top:10vh;position:relative;-webkit-transition:display 1s;transition:display 1s;}#accform.jsx-3028285870 .div.jsx-3028285870{min-height:5vh;}#accform.jsx-3028285870 form.jsx-3028285870{position:relative;}#accform.jsx-3028285870 button.jsx-3028285870{margin-top:3vh;width:100%;height:6vh;border-radius:6px;font-size:3vh;color:#5c52ff;background:#eee;display:block;opacity:0.2;border:none;-webkit-transition:all 0.4s;transition:all 0.4s;}#accform.jsx-3028285870 .buttonstatus.jsx-3028285870{background:#5c52ff;color:white;opacity:1;-webkit-transition:all 0.4s;transition:all 0.4s;}#accform.jsx-3028285870 .require.jsx-3028285870{-webkit-animation:account-jsx-3028285870 1.5s infinite;animation:account-jsx-3028285870 1.5s infinite;}#accform.jsx-3028285870 div.anima.jsx-3028285870{width:100%;height:2px;background:white;-webkit-transition:-webkit-transform 1s;-webkit-transition:transform 1s;transition:transform 1s;-webkit-transform:scale(1,1);-ms-transform:scale(1,1);transform:scale(1,1);-webkit-transform-origin:right 50%;-ms-transform-origin:right 50%;transform-origin:right 50%;}#accform.jsx-3028285870 div.go.jsx-3028285870{height:2px;-webkit-transform:scale(0,1);-ms-transform:scale(0,1);transform:scale(0,1);-webkit-transform-origin:left 50%;-ms-transform-origin:left 50%;transform-origin:left 50%;-webkit-transition:-webkit-transform 0.5s;-webkit-transition:transform 0.5s;transition:transform 0.5s;}@-webkit-keyframes account-jsx-3028285870{0%{background:#5c52ff;}50%{background:#001c50;}100%{background:#5c52ff;}}@keyframes account-jsx-3028285870{0%{background:#5c52ff;}50%{background:#001c50;}100%{background:#5c52ff;}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFx0ZXN0XFxjb21wb25lbnRcXGxvZ2luXFxmb3JtLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTRHeUIsQUFHK0IsQUFPSyxBQUdHLEFBSUgsQUFhSSxBQU1hLEFBR3JCLEFBUUQsQUFRYSxBQUdELEFBR0EsVUF6RFIsQ0FvQ0gsQUFRUyxJQXJDdkIsQUFPYyxHQUhkLENBZ0JlLEFBeUJYLEFBR0EsQUFHQSxHQXJCZ0IsRUFwQ0QsRUFjTCxLQWFELE1BWlEsRUFzQk0sQ0FwQ04sQ0EyQkcsY0FaUCxHQWRTLFdBZVQsY0FDRSxHQTBCUyxHQWY1QixVQVZpQixHQWFqQixRQTdCQSxHQWlCZSxZQUNBLFVBaUJTLEVBaEJBLHVDQXVCSSxTQXRCNUIseUJBZ0I4QixvRUFPOUIseUJBTkEiLCJmaWxlIjoiQzpcXHRlc3RcXGNvbXBvbmVudFxcbG9naW5cXGZvcm0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3Qse3VzZVN0YXRlfSBmcm9tICdyZWFjdCdcclxuaW1wb3J0IElucHV0IGZyb20gJy4vaW5wdXQuanMnXHJcbmltcG9ydCBSb3V0ZXIgZnJvbSAnbmV4dC9yb3V0ZXInXHJcbmltcG9ydCBMb2FkaW5nIGZyb20gJy4uL3B1YmxpYy9sb2FkaW5nJ1xyXG5cclxuZnVuY3Rpb24gRm9ybSh7RXZ9KSB7XHJcbiAgICBjb25zdCBbYWNjb3VudE9rLCBzZXRBY2NvdW50T2tdID0gdXNlU3RhdGUoZmFsc2UpOyBcclxuICAgIGNvbnN0IFtmZXRjaGluZyxzZXRGZXRjaGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XHJcbiAgICAvLyDotKblj7fmo4DmtYvnirbmgIFcclxuICAgIGxldCBidXR0b25SZWY7ICAvLyDmjInpkq5SZWblrprkuYlcclxuICAgIGxldCBhbmltYVJlZjsgIC8vIOWKqOeUu1JlZlxyXG4gICAgbGV0IGFjY291bnRSZWYgPSBSZWFjdC5jcmVhdGVSZWYoKTtcclxuICAgIGxldCBwYXNzd29yZFJlZiA9IFJlYWN0LmNyZWF0ZVJlZigpO1xyXG4gIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5o+Q5Lqk5LqL5Lu2ICAgICBcclxuICAgIGNvbnN0IHN1Ym1pdGV2ZW50ID0gYXN5bmMgKGUpID0+IHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICBsZXQgZm9ybWRhdGEgPSBuZXcgRm9ybURhdGEoZS50YXJnZXQpO1xyXG4gICAgICAgICBsZXQgcmVxdWVzdCA9IGF3YWl0ICBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDozMDAxL2xvZ2luJyx7XHJcbiAgICAgICAgICAgICAgIG1ldGhvZDonUE9TVCcsXHJcbiAgICAgICAgICAgICAgIGJvZHk6Zm9ybWRhdGEsXHJcbiAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBcImluY2x1ZGVcIiBcclxuICAgICAgICAgICB9KVxyXG4gICAgICAgIGlmKHJlcXVlc3Qub2spIHsgICAgICBcclxuICAgICAgICAgICAgbGV0IGEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdhJyk7ICAgICBcclxuICAgICAgICAgICAgYS5jbGljaygpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBFdign5a+G56CB6ZSZ6K+vJyk7XHJcbiAgICAgICAgfSAgICAgICAgICBcclxuICAgICAgICAgICBcclxuICAgIH1cclxuICAgIC8v6LSm5Y+36aqM6K+B5LqL5Lu2XHJcbiAgICBjb25zdCBBQ0NyaWdodCA9IChlKSA9PiB7ICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgaWYoYWNjb3VudFJlZi5jdXJyZW50LmNoaWxkcmVuWzFdLnZhbHVlID09PSAnJykgcmV0dXJuIEV2KCfor7fovpPlhaXotKblj7cnKVxyXG4gICAgICAgICAgICAgICAgIGlmKCFhY2NvdW50T2spe1xyXG4gICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYW5pbWFSZWYuY2xhc3NMaXN0LmFkZCgncmVxdWlyZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgYWNjb3VudCA9IGFjY291bnRSZWYuY3VycmVudC5jaGlsZHJlblsxXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMS9sb2dpbi8ke2FjY291bnR9YCx7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6J0dFVCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihyZXMgPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlcy5vayl7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWEoKTsgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0QWNjb3VudE9rKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNleyAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hUmVmLmNsYXNzTGlzdC5yZW1vdmUoJ3JlcXVpcmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXYoJ+i0puWPt+S4jeWtmOWcqCcpICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1jYXRjaChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmltYSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnRSZWYuY3VycmVudC5zdHlsZS5vcGFjaXR5ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkUmVmLmN1cnJlbnQuc3R5bGUub3BhY2l0eSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZFJlZi5jdXJyZW50LnN0eWxlLnZpc2liaWxpdHkgPSB0cnVlOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYVJlZi5jbGFzc0xpc3QucmVtb3ZlKCdyZXF1aXJlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b25SZWYuY2xhc3NMaXN0LnJlbW92ZSgnYnV0dG9uc3RhdHVzJylcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgfVxyXG4gICAgLy/liqjnlLvkuovku7Yg57q/5p2h5riQ5Y+Y5pWI5p6cXHJcbiAgICBjb25zdCBMaW5lQ29sb3IgPSAoc2VsZWN0KSA9PiB7XHJcbiAgICAgICAgICBpZihzZWxlY3Q8MSl7XHJcbiAgICAgICAgICAgIGFuaW1hUmVmLmNsYXNzTGlzdC5yZW1vdmUoJ3JlcXVpcmUnKVxyXG4gICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGFuaW1hUmVmLmNsYXNzTGlzdC5hZGQoJ3JlcXVpcmUnKVxyXG4gICAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy/liqjnlLvkuovku7Yg57q/5p2h5riQ5Y+Y5pWI5p6cXHJcbiAgICBjb25zdCBidXR0b25Db2xvciA9IChzZWxlY3QpID0+IHtcclxuICAgICAgICBpZihzZWxlY3Q8MSl7XHJcbiAgICAgICAgICAgIGJ1dHRvblJlZi5jbGFzc0xpc3QucmVtb3ZlKCdidXR0b25zdGF0dXMnKVxyXG4gICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGJ1dHRvblJlZi5jbGFzc0xpc3QuYWRkKCdidXR0b25zdGF0dXMnKVxyXG4gICAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIChcclxuICAgICAgICA8ZGl2IGlkPSdhY2Nmb3JtJz4gICAgICAgXHJcbiAgICAgICAgICAgICA8YSBocmVmPVwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2hvbWVcIiBzdHlsZT17e2Rpc3BsYXk6J25vbmUnfX0+IGNsaWNrPC9hPlxyXG4gICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e3N1Ym1pdGV2ZW50fT5cclxuICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRpdlwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxJbnB1dCBcclxuICAgICAgICAgICAgICAgICAgICBldmVudD17TGluZUNvbG9yfVxyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZXZlbnQ9e2J1dHRvbkNvbG9yfVxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9J2FjY291bnQnXHJcbiAgICAgICAgICAgICAgICAgICAgcmVmID0ge2FjY291bnRSZWZ9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICAgICA8SW5wdXQgXHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ9e0xpbmVDb2xvcn1cclxuICAgICAgICAgICAgICAgICAgICBidWV2ZW50PXtidXR0b25Db2xvcn1cclxuICAgICAgICAgICAgICAgICAgICB0eXBlPSdwYXNzd29yZCdcclxuICAgICAgICAgICAgICAgICAgICByZWYgPSB7cGFzc3dvcmRSZWZ9XHJcbiAgICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYW5pbWEnIHJlZj17cmVmID0+IGFuaW1hUmVmID0gcmVmfT5cclxuICAgICAgICAgICAgICAgICAgICAgey8qIOWKqOeUu+e6v+adoSAqL31cclxuICAgICAgICAgICAgICAgICA8L2Rpdj4gICBcclxuICAgICAgICAgICAgICAgICA8YnV0dG9uIHJlZiA9IHtyZWYgPT4gYnV0dG9uUmVmID0gcmVmfSAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e0FDQ3JpZ2h0fSAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICAgICAgIHshZmV0Y2hpbmc/J2NvbnRpbnVlJzo8TG9hZGluZyBjb2xvcj0nd2hpdGUnLz59XHJcbiAgICAgICAgICAgICAgICAgPC9idXR0b24+ICAgICAgICAgICBcclxuICAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgICAgIDxzdHlsZSBqc3g+e2BcclxuICAgICAgICAgICAgICAgICAjYWNjZm9ybSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIHdpZHRoOjMwJTtcclxuICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOjAgYXV0bztcclxuICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDoxMHZoO1xyXG4gICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjpyZWxhdGl2ZTtcclxuICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjpkaXNwbGF5IDFzIDtcclxuICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgI2FjY2Zvcm0gLmRpdiB7XHJcbiAgICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6NXZoO1xyXG4gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAjYWNjZm9ybSBmb3JtIHtcclxuICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246cmVsYXRpdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgIH0gIFxyXG4gICAgICAgICAgICAgICAgICNhY2Nmb3JtIGJ1dHRvbiB7XHJcbiAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6M3ZoO1xyXG4gICAgICAgICAgICAgICAgICAgICB3aWR0aDoxMDAlO1xyXG4gICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6NnZoO1xyXG4gICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOjZweDtcclxuICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOjN2aDtcclxuICAgICAgICAgICAgICAgICAgICAgY29sb3I6IzVjNTJmZjtcclxuICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDojZWVlO1xyXG4gICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OmJsb2NrO1xyXG4gICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OjAuMjtcclxuICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOm5vbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjRzO1xyXG4gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAjYWNjZm9ybSAuYnV0dG9uc3RhdHVzIHtcclxuICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDojNWM1MmZmO1xyXG4gICAgICAgICAgICAgICAgICAgICBjb2xvcjp3aGl0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eToxO1xyXG4gICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgMC40cztcclxuICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICNhY2Nmb3JtIC5yZXF1aXJlIHtcclxuICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOmFjY291bnQgMS41cyBpbmZpbml0ZTtcclxuICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgI2FjY2Zvcm0gZGl2LmFuaW1hIHtcclxuICAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTAwJTtcclxuICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OjJweDtcclxuICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDp3aGl0ZTsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOnRyYW5zZm9ybSAxcztcclxuICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOnNjYWxlKDEsMSk7IFxyXG4gICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOnJpZ2h0IDUwJTtcclxuICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgI2FjY2Zvcm0gZGl2LmdvIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6MnB4O1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTpzY2FsZSgwLDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46bGVmdCA1MCU7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjp0cmFuc2Zvcm0gMC41cztcclxuICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgQGtleWZyYW1lcyBhY2NvdW50IHtcclxuICAgICAgICAgICAgICAgICAgICAgMCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDojNWM1MmZmO1xyXG4gICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgIDUwJSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IzAwMWM1MDtcclxuICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAxMDAlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDojNWM1MmZmO1xyXG4gICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgIGB9XHJcbiAgICAgICAgICAgICA8L3N0eWxlPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgKVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtXHJcbiJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\test\\\\\\\\component\\\\\\\\login\\\\\\\\form.js */\"));\n}\n\nexport default Form;","map":{"version":3,"sources":["C:/test/component/login/form.js"],"names":["React","useState","Input","Router","Loading","Form","Ev","accountOk","setAccountOk","fetching","setFetching","buttonRef","animaRef","accountRef","createRef","passwordRef","submitevent","e","preventDefault","formdata","FormData","target","request","fetch","method","body","credentials","ok","a","document","querySelector","click","ACCright","current","children","value","classList","add","account","then","res","anima","remove","err","console","log","style","opacity","visibility","LineColor","select","buttonColor","display","ref"],"mappings":"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","sourcesContent":["import React,{useState} from 'react'\r\nimport Input from './input.js'\r\nimport Router from 'next/router'\r\nimport Loading from '../public/loading'\r\n\r\nfunction Form({Ev}) {\r\n    const [accountOk, setAccountOk] = useState(false); \r\n    const [fetching,setFetching] = useState(false);\r\n    // 账号检测状态\r\n    let buttonRef;  // 按钮Ref定义\r\n    let animaRef;  // 动画Ref\r\n    let accountRef = React.createRef();\r\n    let passwordRef = React.createRef();\r\n  \r\n                                               //提交事件     \r\n    const submitevent = async (e) => {                                \r\n         e.preventDefault();                \r\n         let formdata = new FormData(e.target);\r\n         let request = await  fetch('http://localhost:3001/login',{\r\n               method:'POST',\r\n               body:formdata,\r\n               credentials: \"include\" \r\n           })\r\n        if(request.ok) {      \r\n            let a = document.querySelector('a');     \r\n            a.click();\r\n        }else{\r\n            Ev('密码错误');\r\n        }          \r\n           \r\n    }\r\n    //账号验证事件\r\n    const ACCright = (e) => {         \r\n                 if(accountRef.current.children[1].value === '') return Ev('请输入账号')\r\n                 if(!accountOk){\r\n                      e.preventDefault();\r\n                      animaRef.classList.add('require');\r\n                        let account = accountRef.current.children[1].value;\r\n                        fetch(`http://localhost:3001/login/${account}`,{\r\n                            method:'GET'\r\n                        }).then(res =>{\r\n                            try {\r\n                                if(res.ok){                    \r\n                                    anima();                        \r\n                                    setAccountOk(true);\r\n                                }\r\n                                else{     \r\n                                    animaRef.classList.remove('require');\r\n                                    Ev('账号不存在')              \r\n                                }\r\n                        }catch(err) {\r\n                            console.log(err)\r\n                        }\r\n                        })\r\n                        const anima = () => {\r\n                            accountRef.current.style.opacity = 0;\r\n                            passwordRef.current.style.opacity = 1;\r\n                            passwordRef.current.style.visibility = true;                    \r\n                            animaRef.classList.remove('require');\r\n                            buttonRef.classList.remove('buttonstatus')\r\n                      }\r\n                }                              \r\n                \r\n        \r\n    }\r\n    //动画事件 线条渐变效果\r\n    const LineColor = (select) => {\r\n          if(select<1){\r\n            animaRef.classList.remove('require')\r\n          }else{\r\n            animaRef.classList.add('require')\r\n          }\r\n    }\r\n    //动画事件 线条渐变效果\r\n    const buttonColor = (select) => {\r\n        if(select<1){\r\n            buttonRef.classList.remove('buttonstatus')\r\n          }else{\r\n            buttonRef.classList.add('buttonstatus')\r\n          }\r\n    }\r\n    return (\r\n        <div id='accform'>       \r\n             <a href=\"http://localhost:3000/home\" style={{display:'none'}}> click</a>\r\n             <form onSubmit={submitevent}>\r\n                 <div className=\"div\">\r\n                    <Input \r\n                    event={LineColor}\r\n                    buevent={buttonColor}\r\n                    type='account'\r\n                    ref = {accountRef}\r\n                    />\r\n                    <Input \r\n                    event={LineColor}\r\n                    buevent={buttonColor}\r\n                    type='password'\r\n                    ref = {passwordRef}\r\n                    />\r\n                 </div>\r\n                 <div className='anima' ref={ref => animaRef = ref}>\r\n                     {/* 动画线条 */}\r\n                 </div>   \r\n                 <button ref = {ref => buttonRef = ref}                       \r\n                        onClick={ACCright}                    \r\n                        >\r\n                   {!fetching?'continue':<Loading color='white'/>}\r\n                 </button>           \r\n             </form>\r\n             <style jsx>{`\r\n                 #accform {\r\n                     width:30%;\r\n                     margin:0 auto;\r\n                     margin-top:10vh;\r\n                     position:relative;\r\n                     transition:display 1s ;\r\n                 }\r\n                 #accform .div {\r\n                     min-height:5vh;\r\n                 }\r\n                 #accform form {\r\n                     position:relative;\r\n                     \r\n                 }  \r\n                 #accform button {\r\n                     margin-top:3vh;\r\n                     width:100%;\r\n                     height:6vh;\r\n                     border-radius:6px;\r\n                     font-size:3vh;\r\n                     color:#5c52ff;\r\n                     background:#eee;\r\n                     display:block;\r\n                     opacity:0.2;\r\n                     border:none;\r\n                     transition: all 0.4s;\r\n                 }\r\n                 #accform .buttonstatus {\r\n                     background:#5c52ff;\r\n                     color:white;\r\n                     opacity:1;\r\n                     transition: all 0.4s;\r\n                 } \r\n                 #accform .require {\r\n                     animation:account 1.5s infinite;\r\n                 }\r\n                 #accform div.anima {\r\n                     width:100%;\r\n                     height:2px;\r\n                     background:white;                    \r\n                     transition:transform 1s;\r\n                     transform:scale(1,1); \r\n                     transform-origin:right 50%;\r\n                 }\r\n                 #accform div.go {\r\n                    height:2px;\r\n                    transform:scale(0,1);\r\n                    transform-origin:left 50%;\r\n                    transition:transform 0.5s;\r\n                 }                              \r\n                 \r\n                 @keyframes account {\r\n                     0% {\r\n                         background:#5c52ff;\r\n                     }\r\n                     50% {\r\n                        background:#001c50;\r\n                     }\r\n                     100% {\r\n                        background:#5c52ff;\r\n                     }\r\n                 }\r\n                 `}\r\n             </style>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Form\r\n"]},"metadata":{},"sourceType":"module"}