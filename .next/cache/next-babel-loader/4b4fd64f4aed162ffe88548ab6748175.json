{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { ADD } from '../../redux/action';\nconst FeaturesComment = React.forwardRef((props, ref) => {\n  const {\n    0: comment,\n    1: setComment\n  } = useState('');\n  const {\n    0: commentList,\n    1: setCommentList\n  } = useState(props.comment);\n\n  const addComment = async e => {\n    // 添加评论事件\n    e.preventDefault();\n    let commentData = new FormData();\n    commentData.append('comment', comment);\n    let request = await fetch(`http://localhost:3001/post/comment/${props.id}`, {\n      method: 'POST',\n      body: commentData,\n      credentials: \"include\"\n    });\n    let res = await request.json();\n\n    if (typeof res == 'object') {\n      setCommentList(res);\n    }\n  };\n\n  const inputEv = e => {\n    if (e.target.value.length > 0) {\n      ref.current.children[1].classList.add('pink');\n    } else {\n      ref.current.children[1].classList.remove('pink');\n    }\n\n    setComment(e.target.value);\n  };\n\n  return __jsx(\"div\", {\n    className: \"jsx-210347145\" + \" \" + \"comment-list\"\n  }, __jsx(\"ul\", {\n    className: \"jsx-210347145\"\n  }, commentList.map(e => __jsx(\"li\", {\n    className: \"jsx-210347145\"\n  }, e.comment, \"\\uD83D\\uDC97\"))), __jsx(\"form\", {\n    ref: ref,\n    onSubmit: addComment,\n    hidden: true,\n    className: \"jsx-210347145\"\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"comment\",\n    onInput: inputEv,\n    value: comment,\n    required: true,\n    placeholder: \"\\u8F93\\u5165\\u5185\\u5BB9\",\n    className: \"jsx-210347145\"\n  }), __jsx(\"div\", {\n    onClick: e => {\n      e.target.closest('.button').nextElementSibling.click();\n    },\n    className: \"jsx-210347145\" + \" \" + \"button\"\n  }, __jsx(\"i\", {\n    className: \"jsx-210347145\" + \" \" + 'iconfont icon-send'\n  })), __jsx(\"input\", {\n    type: \"submit\",\n    value: \"add\",\n    hidden: true,\n    className: \"jsx-210347145\"\n  })), __jsx(_JSXStyle, {\n    id: \"210347145\"\n  }, [\".button.jsx-210347145{-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-radius:50%;}\", \".button.jsx-210347145:hover>i.jsx-210347145{-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);background:#1a79ff;color:white;}\", \".button.jsx-210347145>i.jsx-210347145{font-size:1.6rem;padding:10px;border-radius:50%;}\", \"form.jsx-210347145{width:100%;height:6vh;background:white;border-radius:24px;margin:4vh 0 0;display:none;}\", \"input[type=submit].jsx-210347145{color:white;}\", \".pink.jsx-210347145{background:pink;}\", \"form.jsx-210347145>input.jsx-210347145{-webkit-flex:9;-ms-flex:9;flex:9;text-align:center;height:100%;border:2px solid #f4f6f8;font-size:3vh;padding:0 2vh;outline:none;}\", \"input[type=text].jsx-210347145{color:white;}\", \"form.jsx-210347145>input.jsx-210347145:focus{background:#eeeef4;}\", \".comment-list.jsx-210347145{width:100%;margin:4vh 0 2vh;}\", \"ul.jsx-210347145{width:80%;margin-left:10%;list-style:none;}\", \"li.jsx-210347145{width:100%;height:2vh;margin:1vh;text-align:center;}\"]));\n});\n\nconst dispatchToProps = dispatch => ({\n  Click(post) {\n    dispatch(ADD(post));\n  }\n\n});\n\nconst stateToProps = state => ({});\n\nexport default connect(null, dispatchToProps, null, {\n  forwardRef: true\n})(FeaturesComment);","map":null,"metadata":{},"sourceType":"module"}