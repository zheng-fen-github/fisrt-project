{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Option from './option';\nimport Text from '../textarea';\nimport Context from '../../context/ins-context.js';\nimport Url from '../../../../url';\n\nfunction Form(_ref) {\n  var data = _ref.data;\n\n  var _useState = useState(data.message.name),\n      name = _useState[0],\n      setName = _useState[1];\n\n  var _useState2 = useState(data.account),\n      account = _useState2[0],\n      setAccount = _useState2[1];\n\n  var _useState3 = useState(data.email),\n      email = _useState3[0],\n      setEmail = _useState3[1];\n\n  var _useState4 = useState(null),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var submitEv = function submitEv(e) {\n    var data, req;\n    return _regeneratorRuntime.async(function submitEv$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n            data = new FormData(e.target);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(fetch(Url + 'login/updateAc', {\n              credentials: \"include\",\n              method: 'POST',\n              body: data\n            }));\n\n          case 4:\n            req = _context.sent;\n\n            if (req.ok) {\n              setError('修改成功');\n              time();\n            } else {\n              setError('出小差了，重新刷新或登录试试。');\n              time();\n            }\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var time = function time() {\n    setTimeout(function () {\n      return setError(null);\n    }, 1500);\n  };\n\n  return __jsx(\"form\", {\n    onSubmit: submitEv,\n    className: \"jsx-2964566541\"\n  }, __jsx(Option, {\n    type: \"name\",\n    ev: setName,\n    value: name,\n    tag: \"\\u59D3\\u540D\"\n  }), __jsx(Option, {\n    type: \"account\",\n    ev: setAccount,\n    value: account,\n    tag: \"\\u8D26\\u53F7\"\n  }), __jsx(Text, {\n    data: data.message.Introduction\n  }), __jsx(Option, {\n    type: \"email\",\n    ev: setEmail,\n    value: email,\n    tag: \"\\u90AE\\u7BB1\"\n  }), __jsx(\"div\", {\n    className: \"jsx-2964566541\" + \" \" + \"submit\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2964566541\" + \" \" + \"submitcontainer\"\n  }, __jsx(\"input\", {\n    type: \"submit\",\n    defaultValue: \"\\u63D0\\u4EA4\",\n    className: \"jsx-2964566541\"\n  }))), __jsx(\"div\", {\n    className: \"jsx-2964566541\" + \" \" + \"error\"\n  }, __jsx(\"h2\", {\n    className: \"jsx-2964566541\"\n  }, error)), __jsx(_JSXStyle, {\n    id: \"2964566541\"\n  }, [\"form.jsx-2964566541{min-height:58vh;width:100%;}\", \".submit.jsx-2964566541{margin-top:2vh;width:100%;height:3.48vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}\", \".submitcontainer.jsx-2964566541{width:75%;padding-left:2vh;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}\", \".submit.jsx-2964566541 input.jsx-2964566541{width:35%;height:100%;background:#1f2738;border:none;border-radius:4px;color:white;font-size:1.6vh;font-weight:700;}\", \".error.jsx-2964566541{height:200px;line-height:200px;text-align:center;margin-top:2vh;}\"]));\n}\n\nexport default Form;","map":null,"metadata":{},"sourceType":"module"}